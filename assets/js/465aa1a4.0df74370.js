"use strict";(self.webpackChunkg_2_sentry_partner_docs=self.webpackChunkg_2_sentry_partner_docs||[]).push([[3118],{8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var r=s(6540);const a={},t=r.createContext(a);function i(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(t.Provider,{value:n},e.children)}},8723:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"partner-api/callbacks","title":"Partner API Callbacks","description":"Overview","source":"@site/docs/partner-api/callbacks.md","sourceDirName":"partner-api","slug":"/partner-api/callbacks","permalink":"/docs/partner-api/callbacks","draft":false,"unlisted":false,"editUrl":"https://github.com/g2sentryinc/g2sentry-partner-docs/tree/main/packages/create-docusaurus/templates/shared/docs/partner-api/callbacks.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Partner Open API Overview","permalink":"/docs/partner-api/API"},"next":{"title":"Portal","permalink":"/docs/category/portal"}}');var a=s(4848),t=s(8453);const i={sidebar_position:4},l="Partner API Callbacks",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Securing Callbacks with HMAC",id:"securing-callbacks-with-hmac",level:2},{value:"Callback Payload Format",id:"callback-payload-format",level:2},{value:"Common Fields",id:"common-fields",level:3},{value:"Additional Fields",id:"additional-fields",level:3},{value:"Example Payloads",id:"example-payloads",level:3},{value:"Supported Event Types",id:"supported-event-types",level:2},{value:"Sample Implementation",id:"sample-implementation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"partner-api-callbacks",children:"Partner API Callbacks"})}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(n.p,{children:["Callbacks are a fundamental part of the ",(0,a.jsx)(n.code,{children:"G2 Sentry Partner API"}),", designed to keep your platform up-to-date with real-time job status changes. When significant events occur for jobs requested via the API, G2 Sentry sends HTTP POST requests to your configured callback URL. This enables your system to react immediately to changes, such as updating your UI, notifying users, or triggering automated workflows."]}),"\n",(0,a.jsx)(n.p,{children:"Callbacks are sent for the following job events:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"JobAssigned"}),": A guardian has been assigned to the job."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"JobStarted"}),": The guardian has started the job."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"JobCompleted"}),": The job has been completed."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"JobWithdrawed"}),": The job has been withdrawn or canceled."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"securing-callbacks-with-hmac",children:"Securing Callbacks with HMAC"}),"\n",(0,a.jsx)(n.p,{children:"To ensure the authenticity and integrity of callback requests, each callback includes an HMAC signature in the request headers. This signature is calculated using your callback secret and the raw JSON payload. Your system should verify this signature before processing the callback."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example header:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"X-Signature: <signature>\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"How to verify:"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Use your callback secret as the HMAC key."}),"\n",(0,a.jsx)(n.li,{children:"Calculate the HMAC SHA256 hash of the raw request body."}),"\n",(0,a.jsxs)(n.li,{children:["Compare your calculated signature with the value in the ",(0,a.jsx)(n.code,{children:"X-Signature"})," header."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"callback-payload-format",children:"Callback Payload Format"}),"\n",(0,a.jsx)(n.p,{children:"All callback payloads are sent as JSON objects. Below are the possible fields and examples for each event type."}),"\n",(0,a.jsx)(n.h3,{id:"common-fields",children:"Common Fields"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"jobId"})," (integer): Unique identifier of the job."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"eventType"})," (string): Type of event (",(0,a.jsx)(n.code,{children:"JobAssigned"}),", ",(0,a.jsx)(n.code,{children:"JobStarted"}),", ",(0,a.jsx)(n.code,{children:"JobCompleted"}),", ",(0,a.jsx)(n.code,{children:"JobWithdrawed"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"jobName"})," (string): Name or description of the job."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"jobStatus"})," (string): Current status of the job."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"additional-fields",children:"Additional Fields"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"guardianPhone"})," (string, optional): Masked phone number for contacting the assigned guardian (included for jobs in progress)."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"example-payloads",children:"Example Payloads"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Job Assigned"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "jobId": 5,\r\n  "eventType": "JobAssigned",\r\n  "jobName": "Open House at 123 Main St",\r\n  "jobStatus": "Assigned"\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Job Assigned (with guardian phone)"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "jobId": 5,\r\n  "eventType": "JobAssigned",\r\n  "jobName": "Open House at 123 Main St",\r\n  "jobStatus": "Assigned",\r\n  "guardianPhone": "+12345678901"\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Job Started"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "jobId": 5,\r\n  "eventType": "JobStarted",\r\n  "jobName": "Open House at 123 Main St",\r\n  "jobStatus": "InProgress",\r\n  "guardianPhone": "+12345678901"\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Job Completed"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "jobId": 5,\r\n  "eventType": "JobCompleted",\r\n  "jobName": "Open House at 123 Main St",\r\n  "jobStatus": "Completed"\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Job Withdrawed"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "jobId": 5,\r\n  "eventType": "JobWithdrawed",\r\n  "jobName": "Open House at 123 Main St",\r\n  "jobStatus": "New"\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"supported-event-types",children:"Supported Event Types"}),"\n",(0,a.jsx)(n.p,{children:"While the API defines several event types, only the following are sent as callbacks:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"JobAssigned"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"JobStarted"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"JobCompleted"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"JobWithdrawed"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Other event types such as ",(0,a.jsx)(n.code,{children:"NewJob"}),", ",(0,a.jsx)(n.code,{children:"JobGuardianRate"}),", and ",(0,a.jsx)(n.code,{children:"JobClientRate"})," are not currently sent via callbacks."]}),"\n",(0,a.jsx)(n.h2,{id:"sample-implementation",children:"Sample Implementation"}),"\n",(0,a.jsx)(n.p,{children:"For a practical example of how to implement and verify callbacks using Node.js, see the sample project:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/g2sentryinc/g2sentry-partner-sample",children:"https://github.com/g2sentryinc/g2sentry-partner-sample"})}),"\n",(0,a.jsx)(n.p,{children:"This project demonstrates receiving callbacks, verifying HMAC signatures, and processing job events."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.p,{children:"For more details on configuring your callback URL and secret, refer to the"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);